<?php
//Copyright (c) 2016 iFeiwu.com
 class Trash extends Item { function __construct() { $this->table = "\164\x72\x61\163\x68"; parent::__construct(); } protected function postDelete($request_data) { goto S6vAp; a0jC4: upWDl: goto rlXjd; vL_sh: $this->db->commit(); goto OxUjI; s2xTR: return $this->success(); goto eeMki; EYSO6: foreach ($ids as $id) { goto OMS06; OMS06: $trash = $this->db->select($this->table)->where(array("\x69\x64", "\75", $id))->get(); goto vRZI8; xQI71: if ($this->db->delete($this->table, array("\x69\144", "\x3d", $id))->is()) { goto m4Xft; } goto avS4o; XvsAf: z5jBg: goto buP6M; HX8cl: M2V64: goto XvsAf; vRZI8: $path = $trash["\160\x61\x74\150"]; goto xQI71; Q9s_6: m4Xft: goto xk29e; tlhOq: $this->_rmdir("\x2e\56\57" . $path); goto AYAam; xk29e: if (!($path && count(explode("\57", $path)) >= 2)) { goto e4hWH; } goto tlhOq; avS4o: $error[] = $trash["\x74\x69\164\154\x65"]; goto JRHDl; JRHDl: goto M2V64; goto Q9s_6; AYAam: e4hWH: goto HX8cl; buP6M: } goto a0jC4; vjPBL: return $this->error(); goto fW6co; rlXjd: if (count($error) === 0) { goto dZzCF; } goto jOabZ; AFrTx: $this->db->beginTransaction(); goto EYSO6; fW6co: goto CecZV; goto e0j3e; hH_rM: $ids = $request_data["\x69\144"]; goto AFrTx; S6vAp: $error = array(); goto hH_rM; jOabZ: $this->db->rollBack(); goto vjPBL; eeMki: CecZV: goto e3Vos; OxUjI: $this->_log("\144\145\x6c\x65\x74\x65", array("\164\151\164\154\145" => count($ids))); goto s2xTR; e0j3e: dZzCF: goto vL_sh; e3Vos: } protected function postReplay($request_data) { goto zq2Bh; zq2Bh: $error = array(); goto BBVL7; OoWXh: hnjXr: goto e5JlC; Xoz0l: vOWMn: goto dDsl9; BBVL7: $ids = $request_data["\x69\x64"]; goto co7cs; RPI1e: $this->db->rollBack(); goto zNXFx; A3CA5: return $this->success(); goto Xoz0l; sgGSo: foreach ($ids as $id) { goto pjrX3; cEX4t: APWSg: goto O0TvD; pjrX3: $trash = $this->db->select($this->table)->where(array("\151\x64", "\75", $id))->get(); goto J9G4w; IrJ_G: bt5Me: goto cEX4t; oX45U: goto bt5Me; goto Fihwc; Fihwc: hRucL: goto bOgok; vIyK9: $isadd = $this->db->insert($table, json_decode($trash["\144\141\x74\x61"], true)); goto sb1g4; sb1g4: if ($isadd === false) { goto hRucL; } goto urwAC; urwAC: $this->db->delete($this->table, array("\x69\144", "\x3d", $id)); goto oX45U; J9G4w: $table = $trash["\x74\x61\142\x6c\145"]; goto vIyK9; bOgok: $error[] = $trash["\164\x69\164\154\145"]; goto IrJ_G; O0TvD: } goto tb4Zt; e5JlC: $this->db->commit(); goto mNj9d; co7cs: $this->db->beginTransaction(); goto sgGSo; mNj9d: $this->_log("\x72\x65\160\154\x79", array("\x74\x69\x74\154\x65" => count($ids))); goto A3CA5; zNXFx: return $this->error(); goto xJfsJ; tb4Zt: WowwO: goto A31T3; xJfsJ: goto vOWMn; goto OoWXh; A31T3: if (count($error) === 0) { goto hnjXr; } goto RPI1e; dDsl9: } }
