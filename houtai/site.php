<?php
//Copyright (c) 2016 iFeiwu.com
 class Site extends Item { function __construct() { $this->table = "\163\x69\164\x65"; parent::__construct(); } protected function getData() { goto vzyZV; JSWsO: return $this->success($site); goto xtQAN; vzyZV: $data = $this->db->select($this->table)->all(); goto RyIXe; pE5QP: foreach ($data as $d) { goto SElpu; Ko6zh: $site[$d["\x6e\141\155\x65"]] = $value; goto TslF4; SElpu: $value = $d["\166\x61\154\x75\145"]; goto GKolC; nt_H3: vQYdI: goto VGTFn; TslF4: CRFu_: goto nt_H3; GKolC: if (!($value != '')) { goto CRFu_; } goto Ko6zh; VGTFn: } goto fulFq; RyIXe: $site = array(); goto pE5QP; fulFq: lJw78: goto JSWsO; xtQAN: } protected function postSave($request_data) { goto e17aq; JbEEk: if (count($error) === 0) { goto DH6LS; } goto WS7Qc; Uff86: $this->db->commit(); goto u82n7; u82n7: $this->_log("\165\x70\x64\141\x74\145", array("\164\151\164\154\145" => "\xe7\xbd\x91\347\xab\231\xe8\256\xbe\xe7\xbd\256")); goto R9DV9; WS7Qc: $this->db->rollBack(); goto qgghh; cJVOj: goto Rkku_; goto L1TOb; mJuDc: $error = array(); goto CzNfb; Qai2j: Rkku_: goto jB1uz; L1TOb: DH6LS: goto Uff86; CzNfb: $this->db->beginTransaction(); goto wVfA8; hwdpz: unset($request_data["\x74\157\x6b\145\x6e"], $request_data["\141\x64\155\151\156"], $request_data["\137\162\145\x6d\157\166\145\146\151\x6c\x65\163"]); goto mJuDc; qgghh: return $this->error("\xe5\xb7\xb2\344\277\235\345\xad\230\xe5\244\xb1\xe8\xb4\xa5\xef\xbc\201"); goto cJVOj; wVfA8: foreach ($request_data as $name => $value) { goto xsoeu; pvfZQ: if (!($this->db->insert($this->table, array("\156\141\155\145" => $name, "\x76\x61\154\165\145" => $value))->is() === false)) { goto lkvsg; } goto OTVXZ; OTVXZ: $error[] = $name; goto AmsMK; Ctgd0: qnFgu: goto xI41s; DvFWP: if ($count <= 0) { goto eksrF; } goto EQKNx; EQKNx: if (!($this->db->update($this->table, array("\166\x61\154\165\x65" => $value), array("\x6e\x61\155\145", "\x3d", $name))->is() === false)) { goto qnFgu; } goto dscDv; xsoeu: $count = $this->db->select($this->table)->where(array("\x6e\141\x6d\145", "\x3d", $name))->count(); goto RCtcc; hx0jK: yh_jp: goto OG25M; dscDv: $error[] = $name; goto Ctgd0; xI41s: goto yh_jp; goto tR1zp; tR1zp: eksrF: goto pvfZQ; RCtcc: $value = $this->_encode($value); goto DvFWP; OG25M: UeZ9A: goto zFjxK; AmsMK: lkvsg: goto hx0jK; zFjxK: } goto IIKn5; e17aq: $this->_removeFiles2($request_data["\x5f\162\145\155\157\166\145\x66\x69\x6c\x65\163"]); goto hwdpz; IIKn5: hT1Ih: goto JbEEk; R9DV9: return $this->success("\345\xb7\262\344\277\x9d\xe5\255\230\xe6\x9b\264\346\224\271\357\274\201"); goto Qai2j; jB1uz: } protected function postSkin($request_data) { goto lMGUo; PRmMQ: $filename = "\56\x2e\57\x61\x73\163\145\164\57\143\163\x73\57\163\164\171\154\145\x2e\143\163\x73"; goto CKvA9; IKgpi: if (!isset($request_data["\164\x68\145\155\145\55\x73\153\151\156"])) { goto l7ozI; } goto mPort; CKvA9: file_put_contents($filename, $request_data["\x73\x74\x79\x6c\145\55\x63\x6f\144\145"]); goto BgBrg; u7hvr: $request_data["\x73\153\151\156"] = $skins[1]; goto Df45c; ez6xA: $request_data["\x74\x68\x65\x6d\x65"] = $skins[0]; goto u7hvr; Jwl0B: b8I7_: goto fFRVV; BgBrg: chmod($filename, 420); goto Jwl0B; kY16V: DM7k8: goto joZgc; fFRVV: unset($request_data["\164\x6f\x6b\145\156"], $request_data["\x61\144\x6d\x69\156"], $request_data["\x73\164\171\x6c\145\55\x63\x6f\144\x65"]); goto IKgpi; Df45c: l7ozI: goto JXzOv; JXzOv: foreach ($request_data as $name => $value) { $this->_saveData($this->table, array("\x6e\x61\x6d\145" => $name, "\166\x61\x6c\165\145" => $value), array("\156\141\155\145", "\75", $name)); HynYT: } goto kY16V; mPort: $skins = explode("\55", $request_data["\164\x68\145\155\x65\55\163\153\151\x6e"]); goto ez6xA; lMGUo: if (!isset($request_data["\x73\164\171\x6c\145\55\x63\x6f\144\145"])) { goto b8I7_; } goto PRmMQ; joZgc: return $this->success("\345\xb7\xb2\xe4\277\235\345\xad\x98\346\x9b\264\346\224\271\357\274\201"); goto sKO2L; sKO2L: } protected function getStyleCode() { $code = file_get_contents("\56\x2e\x2f\x61\x73\163\145\x74\57\143\163\163\57\163\x74\x79\154\x65\x2e\x63\163\x73"); return $this->success(array($code)); } }
