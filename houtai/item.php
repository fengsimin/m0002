<?php
//Copyright (c) 2016 iFeiwu.com
 class Item extends Ifeiwu { public function __construct() { goto oRcOP; oRcOP: if ($this->table) { goto nqAl1; } goto JEfpo; XGFXn: parent::__construct(); goto D6avr; RAxXD: nqAl1: goto XGFXn; JEfpo: $this->table = "\x69\x74\x65\155"; goto RAxXD; D6avr: } protected function postPage($request_data) { goto ZDzhe; sMNtM: return $this->success($data); goto J7snv; ZmDOe: jEUfG: goto Ry1l6; o7whF: goto RSQPn; goto ZmDOe; J2Wd3: $page = $page ? $page - 1 : 0; goto zUEOh; UdEvz: $perpage = $request_data["\x70\x65\x72\x70\141\x67\x65"] ?: 0; goto UYlh3; ljiDn: $column = $request_data["\x63\157\x6c\165\155\156"] ?: "\52"; goto fxvsH; Z31bT: RSQPn: goto kdieU; zUEOh: $total = $this->db->select($this->table)->where($where)->count(); goto HTddR; HkiqM: $data = array("\154\x69\163\x74" => $list, "\x74\157\x74\141\154" => $total, "\x70\145\162\160\x61\147\145" => $perpage, "\160\141\147\145" => $page); goto Z31bT; Ry1l6: $page = $request_data["\160\141\147\x65"] ?: 1; goto J2Wd3; afeyi: $data = $this->db->select($this->table, $column)->where($where)->order($order)->all(); goto o7whF; HTddR: $list = $this->db->select($this->table, $column)->where($where)->order($order)->limit(array($page * $perpage, $perpage))->all(); goto HkiqM; UYlh3: if ($perpage > 0) { goto jEUfG; } goto afeyi; ZDzhe: $this->_callback("\x63\141\x6c\x6c\142\x61\143\153\120\x61\x67\145\102\x65\146\157\x72\145", array(&$request_data)); goto ljiDn; fxvsH: $where = $request_data["\x77\x68\x65\x72\x65"] ?: "\x31\40\75\40\61"; goto a685R; kdieU: $this->_callback("\x63\141\154\154\x62\x61\143\153\120\x61\147\145\x41\x66\164\145\162", array(&$data)); goto sMNtM; a685R: $order = $request_data["\x6f\162\x64\145\x72"] ?: $this->order; goto UdEvz; J7snv: } protected function postQuery($request_data) { goto y3BQ4; y3BQ4: $sql = $request_data["\163\x71\x6c"]; goto YQQ5J; DD5mh: D7HmX: goto ZQrIy; ZQrIy: return $this->db->query($sql, $request_data["\166\141\154\x75\x65\x73"])->all(); goto ZH93C; h2hd7: $sql = str_replace("\44\x74\141\142\154\x65", $this->prefix . $this->table, $sql); goto DD5mh; YQQ5J: if (!(stripos($sql, "\44\x74\x61\x62\x6c\145") !== false)) { goto D7HmX; } goto h2hd7; ZH93C: } protected function getOne($id, $column = null) { goto eSh_b; eSh_b: $column = $column ?: "\52"; goto rCcU_; rCcU_: $data = $this->db->select($this->table, $column)->where(array("\151\144", "\x3d", $id))->get(); goto tGyZx; tGyZx: return $this->success($data); goto zcWZx; zcWZx: } protected function postAdd($request_data) { goto KrRGM; TNr1L: $data = $this->_bulidData($request_data); goto TULrl; Qrt82: $data["\151\x64"] = $id; goto vwKXn; g_fEX: sgol7: goto sn9rN; liBHw: $id = $this->db->insert($this->table, $data)->id(); goto BeL_H; yv3GD: C4d0Z: goto tbTpV; MEXHE: $this->_callback("\x63\141\x6c\x6c\142\x61\143\x6b\101\x64\144\101\146\x74\145\x72", array($id, &$request_data)); goto igDQs; igDQs: $this->_log("\141\144\x64", array("\x74\x69\164\154\x65" => $data["\x74\151\x74\x6c\x65"], "\x74\141\142\x6c\x65\x5f\x69\x64" => $id)); goto C4y32; C4y32: $this->db->commit(); goto AhVVN; BeL_H: if ($id) { goto C4d0Z; } goto yW8tG; bHSbU: $this->db->rollBack(); goto tVv2_; tbTpV: $udata = array("\151\144" => $id); goto BOEwr; Wr0IB: $upload_path = $request_data["\44\x75\x70\154\x6f\141\x64\137\x70\x61\x74\150"]; goto c25Fz; g5nGQ: $upload_name = $request_data["\44\165\160\154\x6f\x61\x64\x5f\156\141\155\145"]; goto Wr0IB; jyoo5: $udata["\x6c\145\x76\x65\154"] = $this->_getLevel($pid, $id); goto kiE2K; nbrnl: if (!($pid > 0 && in_array("\154\145\x76\145\154", $this->fields))) { goto ip1Me; } goto jyoo5; KiiHw: goto sgol7; goto Vw2m7; c25Fz: if (!($upload_name && $upload_path)) { goto v0sSk; } goto Qrt82; TULrl: $data["\143\x74\x69\x6d\x65"] = time(); goto kvjZ3; BOEwr: $pid = $data["\160\151\x64"]; goto nbrnl; yW8tG: return $this->error("\346\267\273\xe5\x8a\240\xe6\x95\260\346\x8d\256\xe5\244\xb1\xe8\xb4\xa5\357\274\x81"); goto yv3GD; tVv2_: return $this->error("\346\xb7\xbb\345\x8a\xa0\xe6\225\xb0\xe6\x8d\256\345\xa4\xb1\350\264\245\xef\xbc\201"); goto KiiHw; Vw2m7: opioY: goto MEXHE; dXUhX: v0sSk: goto mUkeN; vwKXn: $upload_path = $this->_bulidUploadPath($upload_path, $data); goto xdXEC; xdXEC: $udata[$upload_name] = $upload_path; goto dXUhX; kiE2K: ip1Me: goto g5nGQ; mUkeN: if ($this->db->update($this->table, $udata, array("\151\144", "\x3d", $id))->is()) { goto opioY; } goto bHSbU; kvjZ3: $this->db->beginTransaction(); goto liBHw; AhVVN: return $this->success("\346\xb7\273\345\212\xa0\xe6\x95\xb0\xe6\215\256\xe6\x88\220\345\212\237\357\274\x81", array("\151\144" => $id, "\151\x6d\141\x67\x65\x5f\160\x61\x74\x68" => $upload_path)); goto g_fEX; KrRGM: $this->_callback("\x63\x61\154\154\x62\x61\x63\153\101\x64\x64\x42\145\x66\x6f\x72\x65", array(&$request_data)); goto bK1VC; bK1VC: $this->_removeFiles2($request_data["\x5f\x72\145\x6d\157\166\x65\x66\151\x6c\145\x73"]); goto TNr1L; sn9rN: } protected function postUpdate($id, $request_data) { goto zDwlh; n2L_W: Jg4vr: goto NBhWS; HZeAq: $data["\x6c\x65\166\x65\x6c"] = $this->_getLevel($pid, $id); goto joa40; KtghZ: $upload_path = $request_data["\44\165\160\x6c\x6f\141\144\137\160\x61\164\150"]; goto KW1ia; mDdBR: if (!in_array($upload_name, $this->fields)) { goto Jg4vr; } goto iXHEf; Q45Cw: $data = $this->_bulidData($request_data); goto xR_Ix; joa40: qxdp3: goto l38qT; q8Y4e: return $this->success("\xe5\267\xb2\344\277\x9d\345\xad\230\346\233\xb4\346\224\xb9\xef\274\201"); goto qsfSr; VPNAL: $upload_path = $this->_bulidUploadPath($upload_path, $data); goto mDdBR; QBpZu: G6VRC: goto zqIi0; XnXUj: if ($this->db->update($this->table, $data, array("\151\x64", "\x3d", $id))->is()) { goto G6VRC; } goto jn7sW; qsfSr: YwSGA: goto DFr5G; RCyHf: $this->_removeFiles2($request_data["\x5f\162\x65\155\157\x76\145\146\x69\x6c\145\163"]); goto Q45Cw; KJ382: $this->_log("\x75\x70\x64\x61\x74\145", array("\164\151\164\154\x65" => $data["\164\x69\164\x6c\x65"])); goto q8Y4e; NBhWS: hfaNV: goto XnXUj; zDwlh: $this->_callback("\x63\x61\154\x6c\142\141\143\153\x55\160\x64\x61\164\145\x42\145\x66\157\x72\145", array(&$request_data)); goto RCyHf; zqIi0: $this->_callback("\143\141\154\154\x62\x61\x63\153\x55\x70\x64\x61\x74\x65\x41\146\x74\x65\x72", array($id, &$request_data)); goto KJ382; PFejA: if (!($pid > 0 && in_array("\x6c\x65\x76\x65\154", $this->fields))) { goto qxdp3; } goto HZeAq; iXHEf: $data[$upload_name] = $upload_path; goto n2L_W; KW1ia: if (!($upload_name && $upload_path)) { goto hfaNV; } goto VPNAL; jn7sW: return $this->error("\344\xbf\235\345\255\x98\xe5\244\261\350\xb4\245\xef\274\201"); goto jFnDr; xR_Ix: $data["\165\x74\x69\155\145"] = time(); goto YaldX; jFnDr: goto YwSGA; goto QBpZu; YaldX: $pid = $data["\x70\151\144"]; goto PFejA; l38qT: $upload_name = $request_data["\x24\165\160\154\157\141\x64\137\x6e\141\x6d\x65"]; goto KtghZ; DFr5G: } protected function postField($request_data) { goto eqz35; mwFy1: rma3H: goto Z98l4; yPhBb: BtxD3: goto YH741; TFssy: goto BtxD3; goto mwFy1; Z98l4: return $this->success(); goto yPhBb; XtIka: return $this->error(); goto TFssy; Pr3AK: $name = $request_data["\x6e\x61\x6d\145"]; goto um8fM; um8fM: $value = $request_data["\166\x61\x6c\165\x65"]; goto Y4gjw; Y4gjw: if ($this->db->update($this->table, array($name => $value), array("\151\144", "\111\116", $ids))->is()) { goto rma3H; } goto XtIka; eqz35: $ids = $request_data["\151\x64"]; goto Pr3AK; YH741: } protected function postCount($request_data) { goto ZeVuR; mSvoW: return $this->db->select($table)->where($where)->count(); goto v8s1S; PVkAP: $where = $request_data["\167\150\145\x72\x65"] ?: "\x31\40\75\x20\x31"; goto mSvoW; ZeVuR: $table = $request_data["\x74\141\142\x6c\145"] ?: $this->table; goto PVkAP; v8s1S: } protected function postDelete($request_data) { goto LLY4P; ux2uC: VKv8K: goto WWGeW; MTOfI: $this->_log("\x72\x65\x6d\x6f\166\x65", array("\x74\x69\x74\154\x65" => count($ids))); goto E_8cr; XypCf: $this->db->rollBack(); goto F4_BW; NRaS6: S3344: goto BKqkZ; iQdIf: $ids = $request_data["\151\x64"]; goto H373l; BKqkZ: $this->_callback("\143\141\x6c\x6c\142\141\143\153\x44\145\x6c\145\x74\x65\x41\146\164\x65\x72", array(&$request_data)); goto BmJDj; WWGeW: if (count($error) === 0) { goto S3344; } goto XypCf; E_8cr: return $this->success(); goto ezX1w; ezX1w: gQmO8: goto P0b86; gSQZE: foreach ($ids as $id) { goto EnLTW; nfHb_: $this->_trash($item, $request_data); goto TYXLz; ORL5l: J0w2o: goto TDeJj; It1HR: goto JDz2N; goto unNS4; unNS4: CzI2w: goto nfHb_; EnLTW: $item = $this->db->select($this->table)->where(array("\151\144", "\x3d", $id))->get(); goto buYLx; buYLx: if ($this->db->delete($this->table, array("\x69\144", "\x3d", $id))->is()) { goto CzI2w; } goto d9Xfz; TYXLz: JDz2N: goto ORL5l; d9Xfz: $error[] = $id; goto QFbEd; QFbEd: goto J0w2o; goto It1HR; TDeJj: } goto ux2uC; H373l: $this->db->beginTransaction(); goto gSQZE; UOVu7: goto gQmO8; goto NRaS6; F4_BW: return $this->error("\xe6\234\211\40" . count($error) . "\xe6\235\241\346\225\xb0\xe6\215\256\345\x88\xa0\xe9\231\xa4\345\xa4\261\xe8\264\xa5\xef\274\x81"); goto UOVu7; IHvtv: $error = array(); goto iQdIf; LLY4P: $this->_callback("\143\x61\x6c\x6c\x62\x61\143\x6b\104\145\x6c\145\x74\145\102\145\146\x6f\162\x65", array(&$request_data)); goto IHvtv; BmJDj: $this->db->commit(); goto MTOfI; P0b86: } }
