<?php
//Copyright (c) 2016 iFeiwu.com
 class Admin extends Item { function __construct() { $this->table = "\x61\x64\x6d\151\x6e"; parent::__construct(); } public function postLogin($request_data) { goto votAo; Bfey6: $this->db->update($this->table, array("\152\x73\x6f\156" => json_encode($json)), array("\151\x64", "\x3d", $admin["\151\144"])); goto ZPFFO; pZSyt: $pass = $request_data["\160\x61\163\x73"]; goto oCldP; oCldP: $admin = $this->db->select($this->table)->where("\163\164\x61\164\x65\40\75\x20\61\40\101\x4e\104\40\156\141\x6d\x65\40\x3d\x20\77", array($name))->get(); goto kFufI; votAo: $name = $request_data["\156\141\x6d\145"]; goto pZSyt; soSuO: $json["\154\x6f\x67\x69\156\x5f\164\151\155\x65"] = date("\131\55\x6d\55\x64\40\110\x3a\151"); goto jw5ye; ZPFFO: $admin["\x72\x75\156\164\x69\x6d\145"] = $this->_runtime(); goto AY3ud; MvDPS: ifeiwu\Loader::import("\145\170\x74\145\x6e\144\57\x50\141\x73\163\167\157\162\x64\110\x61\x73\x68"); goto hdEV3; DkrG6: return $this->error("\347\224\250\346\210\xb7\345\x90\x8d\xe6\x88\226\xe5\257\206\347\xa0\201\344\270\x8d\346\xad\xa3\347\241\xae\357\274\x81"); goto NQvIO; SX2dm: vOkEp: goto m97q5; F3pL4: return $this->error("\xe7\x94\xa8\346\x88\xb7\xe5\220\215\xe6\x88\226\xe5\xaf\206\347\xa0\x81\344\xb8\x8d\xe6\255\xa3\xe7\241\256\xef\xbc\x81"); goto SX2dm; XgcAZ: return $this->success($admin); goto Vvdvu; NQvIO: feDd8: goto MvDPS; AY3ud: $this->_log("\x6c\x6f\147\151\x6e", array("\141\x64\x6d\151\x6e\137\151\144" => $admin["\151\x64"], "\x61\144\155\151\x6e\x5f\156\141\x6d\x65" => $admin["\156\x61\x6d\x65"])); goto XgcAZ; m97q5: $json = json_decode($admin["\152\x73\157\x6e"], true); goto soSuO; kFufI: if ($admin) { goto feDd8; } goto DkrG6; uYKXG: if ($hasher->CheckPassword($pass, $admin["\160\x61\x73\x73"])) { goto vOkEp; } goto F3pL4; OVyAm: $json["\154\x6f\147\x69\156\137\143\157\165\156\x74"] = $json["\x6c\x6f\147\x69\156\x5f\x63\157\165\x6e\164"] + 1; goto Bfey6; hdEV3: $hasher = new PasswordHash(8, false); goto uYKXG; jw5ye: $json["\x6c\x6f\147\x69\156\137\151\160"] = $this->_getIP(); goto OVyAm; Vvdvu: } protected function postPassword($id, $request_data) { goto lbo48; SLqBn: if ($this->db->update($this->table, $data, array("\151\144", "\75", $id))->is()) { goto xOCUx; } goto nrL9g; MlZY4: goto yk5LO; goto T50f8; rcHQU: yk5LO: goto Q1ZV3; nMQZF: $json["\x70\141\163\x73\x5f\164\151\x6d\145"] = time(); goto kT7B5; tY33m: ifeiwu\Loader::extend("\x50\141\x73\163\167\157\162\144\110\141\x73\x68"); goto c7WmJ; tOkTP: Zm1Pp: goto IuYkP; lbo48: $admin = $this->db->select($this->table)->where("\x73\164\141\164\145\x20\75\40\x31\x20\101\x4e\104\x20\151\144\x20\75\40\x3f", array($id))->get(); goto vzCLJ; vzCLJ: $old_pass = $request_data["\x6f\154\x64\x70\x61\163\163"]; goto SKG8r; IuYkP: $json = json_decode($admin["\x6a\163\x6f\x6e"], true); goto nMQZF; SKG8r: $pass = $request_data["\x70\x61\163\x73"]; goto tY33m; nrL9g: return $this->error("\xe8\xaf\267\347\xa8\215\xe5\x80\x99\345\206\215\350\xaf\x95\x2e\x2e\x2e"); goto MlZY4; RHGd4: return $this->error("\xe6\x97\247\345\257\x86\347\xa0\201\344\xb8\215\346\xad\243\xe7\241\256\357\xbc\x81"); goto tOkTP; WG_4N: if ($hasher->CheckPassword($old_pass, $admin["\x70\141\163\x73"])) { goto Zm1Pp; } goto RHGd4; T50f8: xOCUx: goto y3EuV; y3EuV: return $this->success("\350\257\xb7\xe4\275\xbf\xe7\224\xa8\346\226\260\xe5\257\x86\xe7\xa0\x81\351\x87\x8d\346\226\260\347\x99\xbb\xe5\275\x95\357\xbc\x81"); goto rcHQU; kT7B5: $data = array("\160\141\x73\x73" => $hasher->HashPassword($pass), "\152\163\x6f\x6e" => json_encode($json)); goto SLqBn; c7WmJ: $hasher = new PasswordHash(8, false); goto WG_4N; Q1ZV3: } protected function postPassword2($request_data) { goto f42QC; I55KO: return $this->error("\351\x94\231\350\xaf\257\xef\xbc\214\350\xaf\267\347\250\x8d\xe5\x80\x99\xe5\x86\x8d\xe8\xaf\x95\x2e\x2e\x2e"); goto AN6QT; ESDqU: ifeiwu\Loader::extend("\x50\x61\x73\163\x77\x6f\x72\144\110\141\163\150"); goto DPCw2; AN6QT: goto kOrmT; goto NCeD9; NCeD9: YtJRy: goto JDn0J; DPCw2: $hasher = new PasswordHash(8, false); goto jS4bf; z1y_9: kOrmT: goto IH1iW; JDn0J: return $this->success(); goto z1y_9; f42QC: $pass = $request_data["\160\141\163\163"]; goto ESDqU; jS4bf: if ($this->db->update($this->table, array("\x70\x61\x73\163" => $hasher->HashPassword($pass)), "\x69\x64\x20\75\x20\61")->is()) { goto YtJRy; } goto I55KO; IH1iW: } protected function postAdd($request_data) { goto Z2dyB; uvq2T: $this->_log("\x61\144\144", array("\x74\151\164\x6c\x65" => $data["\x6e\x61\155\145"])); goto qSVil; mhhLN: $data["\x63\164\151\155\x65"] = time(); goto a138K; xzWmn: goto N8wod; goto WxIr1; a138K: if ($this->db->insert($this->table, $data)->is()) { goto bBHSJ; } goto Pi98S; qSVil: return $this->success(); goto Lpc_7; SB7pZ: $data["\162\x62\x61\143"] = $request_data["\x72\x62\x61\x63"] ?: "\x6e\x6f\x72\155\x61\x6c"; goto Rmw3x; G81tJ: $data["\156\x61\x6d\145"] = $request_data["\x6e\x61\x6d\x65"]; goto jzjzW; WxIr1: bBHSJ: goto uvq2T; Z2dyB: ifeiwu\Loader::import("\145\x78\x74\x65\156\x64\57\120\x61\x73\x73\167\157\162\x64\x48\141\x73\x68"); goto FwLxb; Pi98S: return $this->error("\xe5\xb8\x90\345\217\xb7\xe5\267\262\345\xad\230\xe5\x9c\250\357\274\x81"); goto xzWmn; Rmw3x: $data["\152\163\x6f\156"] = json_encode(array("\154\x61\x73\164\x5f\x74\151\155\x65" => "\55\x2d\55\x2d\55", "\154\x61\x73\164\x5f\151\x70" => "\x30\x2e\60\x2e\60\x2e\60", "\x6c\x6f\x67\x69\156\137\x63\157\165\x6e\164" => 0)); goto mhhLN; KZGow: $data["\x73\x74\141\x74\145"] = $request_data["\x73\x74\x61\x74\x65"] ?: 0; goto SB7pZ; Lpc_7: N8wod: goto JKC9y; FwLxb: $hasher = new PasswordHash(8, false); goto G81tJ; jzjzW: $data["\x70\141\163\x73"] = $hasher->HashPassword($request_data["\x70\x61\163\163"]); goto KZGow; JKC9y: } protected function postUpdate($id, $request_data) { goto MwWot; Gci68: vdPLp: goto eNNFx; cZdmt: $data["\163\x65\x78"] = $request_data["\x73\x65\170"]; goto roU4G; thNuE: $data["\x73\x74\x61\164\x65"] = $request_data["\x73\x74\x61\x74\x65"]; goto gmTIP; roU4G: $data["\x75\164\151\x6d\x65"] = time(); goto K6E54; tMY_n: goto zJ0Th; goto cl1Ix; iwMq2: if (!isset($request_data["\156\141\x6d\145"])) { goto h3mf9; } goto tmPmS; AF1hm: $data["\151\156\x74\x72\157"] = $request_data["\x69\156\164\162\157"]; goto LuYV1; NJk_6: return $this->error("\350\xaf\xb7\347\xa8\215\345\200\x99\xe5\206\215\xe8\257\x95\x2e\56\56"); goto tMY_n; sM3vR: $hasher = new PasswordHash(8, false); goto iwMq2; LuYV1: $data["\161\x71"] = $request_data["\x71\161"]; goto cZdmt; cl1Ix: IKeNc: goto ffqiO; MwWot: ifeiwu\Loader::import("\x65\170\164\145\x6e\144\57\x50\141\x73\163\x77\157\162\x64\110\141\163\x68"); goto sM3vR; a_X9i: $data["\162\145\141\x6c\x6e\x61\x6d\145"] = $request_data["\162\145\141\154\156\x61\x6d\x65"]; goto T7Dwl; VQM6P: $data["\160\141\x73\163"] = $hasher->HashPassword($request_data["\160\x61\163\x73"]); goto VpYg5; gmTIP: jkNve: goto B42V3; HSM9n: return $this->success(); goto mm6YY; VpYg5: pzCSU: goto a_X9i; eNNFx: if (!isset($request_data["\160\x61\163\x73"])) { goto pzCSU; } goto VQM6P; Cyhtf: h3mf9: goto kjzG7; ffqiO: $this->_log("\165\x70\x64\x61\x74\x65", array("\x74\x69\x74\154\x65" => $data["\x6e\141\155\145"])); goto HSM9n; B42V3: if (!isset($request_data["\162\x62\141\143"])) { goto vdPLp; } goto xVyka; s8k4y: $data["\x6d\x6f\142\x69\x6c\x65"] = $request_data["\x6d\157\142\x69\x6c\x65"]; goto AF1hm; xVyka: $data["\162\142\141\143"] = $request_data["\162\142\x61\143"]; goto Gci68; K6E54: if ($this->db->update($this->table, $data, array("\151\144", "\75", $id))->is()) { goto IKeNc; } goto NJk_6; tmPmS: $data["\156\141\155\x65"] = $request_data["\156\141\x6d\x65"]; goto Cyhtf; T7Dwl: $data["\141\x64\144\x72\x65\x73\163"] = $request_data["\x61\144\x64\x72\145\x73\x73"]; goto s8k4y; kjzG7: if (!isset($request_data["\x73\164\141\x74\145"])) { goto jkNve; } goto thNuE; mm6YY: zJ0Th: goto caEuB; caEuB: } protected function postDelete($request_data) { goto XMXBe; mhKU8: foreach ($ids as $id) { $this->db->delete($this->table, array("\151\144", "\x3d", $id)); x3xn6: } goto Zs8xS; Zs8xS: YjxQw: goto dlPo7; XMXBe: $ids = $request_data["\151\x64"]; goto mhKU8; dlPo7: return $this->success(); goto oSLS_; oSLS_: } protected function postToken($request_data) { goto ZUqOI; KEqZW: return $this->success(); goto el0_E; el0_E: zHf15: goto lrgxN; lrgxN: oxEyo: goto cBCzN; ZUqOI: if (!($token = $request_data["\164\157\x6b\145\156"])) { goto oxEyo; } goto V_t0b; V_t0b: if (!file_put_contents("\164\157\x6b\145\156\x2e\x70\x68\x70", "\74\x3f\160\150\160\40\162\x65\x74\165\x72\x6e\x20\x27{$token}\47\x3b")) { goto zHf15; } goto KEqZW; cBCzN: return $this->error("\346\262\241\xe6\234\211\346\235\203\351\231\x90\346\233\264\xe6\215\242\345\257\x86\xe9\222\xa5\xef\274\201"); goto l6veX; l6veX: } protected function postUpgrade($request_data) { goto tDfWP; TJNK3: curl_setopt($ch, CURLOPT_URL, $curl_url . "\57\x75\x70\147\x72\x61\x64\145\56\x70\150\160"); goto Uuf6A; b6vP_: pkCfz: goto tnF4d; Uuf6A: curl_setopt($ch, CURLOPT_HEADER, 0); goto sVaK4; XTPrL: $json = curl_exec($ch); goto zzfc6; Oep5u: return $this->error($json["\155\145\163\x73\141\147\x65"]); goto A1p9h; A1p9h: U0BZe: goto qq0T7; tDfWP: $ctx = stream_context_create(array("\150\164\164\160" => array("\x74\x69\155\145\x6f\165\164" => 30))); goto SGFtr; XSFiY: $curl_post = array("\x76\151\x65\x77\x5f\x67\151\164" => $request_data["\166\151\145\167\x5f\x67\x69\164"], "\166\151\145\x77\x5f\x6e\x61\155\x65" => $request_data["\x76\x69\145\x77\137\156\x61\155\x65"], "\x76\151\145\167\x5f\166\x65\162\163\151\157\x6e" => $request_data["\x76\151\x65\167\x5f\166\145\x72\x73\x69\157\x6e"]); goto OhimT; ZF470: curl_setopt($ch, CURLOPT_POST, 1); goto q4mCL; fhLG7: $json = json_decode($json, true); goto o0nHL; zqxat: return $this->error("\346\227\240\346\xb3\x95\xe8\xaf\273\345\x8f\226\xe6\x96\207\344\273\266\357\274\214\350\xaf\xb7\350\201\x94\347\263\273\351\xa3\236\345\xb1\213\xe5\xae\xa2\xe6\234\215\343\x80\x82"); goto EoaEj; IpsSl: unlink("\x2e\x2e\x2f\x64\x61\164\141\x62\x61\163\x65\56\x73\x71\154"); goto B51DA; fp5nT: if (file_put_contents("\x2e\x2e\x2f\x75\160\x67\162\x61\144\145\x2e\160\x68\160", $upgrade_code)) { goto pkCfz; } goto BaYsW; q4mCL: curl_setopt($ch, CURLOPT_POSTFIELDS, $curl_post); goto XTPrL; B51DA: return $this->success("\xe8\275\273\xe7\275\x91\xe7\xab\231\xe5\215\x87\xe7\xba\xa7\346\x88\x90\xe5\x8a\237\xef\xbc\201"); goto EyKLF; SGFtr: $upgrade_code = file_get_contents("\x68\x74\164\x70\x3a\57\x2f\x69\146\x65\151\167\x75\x2e\143\x6f\155\x2f\x67\145\x74\x2f\165\x70\x67\162\x61\x64\145\77\x74\75" . time(), 0, $ctx); goto wwtBP; EoaEj: JRzSP: goto fp5nT; YH817: unlink("\x2e\x2e\x2f\165\160\x64\141\164\145\56\x70\150\160"); goto IpsSl; zzfc6: curl_close($ch); goto fhLG7; OhimT: $ch = curl_init(); goto TJNK3; BaYsW: return $this->error("\xe6\227\240\xe6\xb3\225\xe5\206\231\345\205\245\xe6\226\x87\344\xbb\xb6\357\xbc\x8c\350\257\xb7\346\212\212\347\x9b\xae\xe5\xbd\225\350\256\xbe\347\275\xae\344\xb8\xba\60\67\67\x37\345\x8f\257\345\x86\x99\xe6\235\x83\xe9\x99\x90\xef\274\201"); goto b6vP_; tnF4d: $curl_url = "\x68\x74\164\160\x3a\x2f\x2f" . $_SERVER["\x53\x45\122\x56\x45\122\137\x4e\101\x4d\105"] . implode("\57", array_slice(explode("\57", $_SERVER["\123\103\x52\x49\120\x54\137\x4e\101\x4d\x45"]), 0, -2)); goto XSFiY; sVaK4: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto ZF470; o0nHL: if (!($json["\143\157\144\145"] == 1)) { goto U0BZe; } goto Oep5u; wwtBP: if (!($upgrade_code === false)) { goto JRzSP; } goto zqxat; qq0T7: unlink("\56\x2e\57\165\x70\147\x72\x61\x64\145\56\160\150\160"); goto YH817; EyKLF: } protected function postPublish() { goto ApWzR; vSuwp: TBiHp: goto zZyMP; ApWzR: $this->_saveData("\x73\151\164\x65", array("\156\x61\x6d\145" => "\x76\x65\x72\163\x69\x6f\x6e", "\166\141\154\x75\145" => time()), array("\x6e\141\x6d\x65", "\x3d", "\166\x65\162\163\151\157\x6e")); goto AE2Oq; GbY9x: potcJ: goto PANcZ; q1shd: return $this->error(); goto OavZI; OavZI: goto potcJ; goto ELoFS; e55Y4: return $this->success(); goto vSuwp; zZyMP: if ($this->_rmdir("\56\56\57\x64\141\164\141\x2f\143\141\143\150\145\x2f") !== false) { goto jVhdW; } goto q1shd; AE2Oq: if (is_dir("\56\x2e\x2f\144\x61\164\141\57\143\141\143\150\x65\x2f")) { goto TBiHp; } goto e55Y4; m_iRZ: return $this->success(); goto GbY9x; ELoFS: jVhdW: goto m_iRZ; PANcZ: } protected function getFiles($dir, $ext) { goto qzZtG; MG_9P: $files[] = array("\x6e\141\155\145" => $filename, "\x63\x6f\x6e\164\x65\x6e\164" => $file_content); goto yS5wC; VOunJ: wUgMC: goto To44g; bnHT7: $file_content = file_get_contents($filename); goto MG_9P; x3WEF: if (!($file != "\56" && $file != "\56\56")) { goto wUgMC; } goto ZSr__; OZPhH: if (!(false !== ($file = readdir($handle)))) { goto s2TLV; } goto x3WEF; To44g: goto JkEpf; goto O8jXe; ZSr__: $filename = $dir . "\x2f" . $file; goto vVQJ1; uwE8g: closedir($handle); goto Xh2hf; VXK_u: $handle = opendir($dir); goto UQJMf; Tg51r: JkEpf: goto OZPhH; TPfzv: rCSoS: goto Tg51r; dOWXu: gLk6Q: goto OCdGq; Xh2hf: return $this->success($files); goto dOWXu; vVQJ1: if (!($ext == "\x2a" || strpos($filename, $ext))) { goto uurli; } goto bnHT7; cLrec: goto gLk6Q; goto TPfzv; EbLvu: return $this->error($dir . "\xe6\x97\240\346\xb3\225\346\211\x93\xe5\xbc\x80\347\233\xae\xe5\275\225\xef\274\201"); goto cLrec; qzZtG: $dir = $dir ? $dir : "\56"; goto GzAbc; O8jXe: s2TLV: goto uwE8g; GzAbc: $ext = $ext ? $ext : "\x2e\x70\150\160"; goto VXK_u; UQJMf: if ($handle) { goto rCSoS; } goto EbLvu; yS5wC: uurli: goto VOunJ; OCdGq: } protected function getFileContent($filename) { goto GYFu0; tECTs: goto GWkQS; goto A_nxn; VJ8vm: GWkQS: goto Jmn_E; vEYR5: return $this->success(array("\x6e\141\x6d\145" => $filename, "\x63\x6f\x6e\164\145\x6e\x74" => $content)); goto VJ8vm; lYjNN: $content = file_get_contents($filename); goto vEYR5; GYFu0: if (file_exists($filename)) { goto DehOF; } goto bX1NK; bX1NK: return $this->error($filename . "\40\346\x96\207\344\273\266\344\xb8\215\345\xad\230\345\x9c\250\xef\xbc\201"); goto tECTs; A_nxn: DehOF: goto lYjNN; Jmn_E: } protected function getFileConfig($name) { goto hxE6o; KfUZX: if (file_exists($filename)) { goto i9LYN; } goto B0dvU; BPh8L: return include $filename; goto FXKif; hxE6o: $filename = "\56\56\57\143\x6f\x6e\146\151\147\x2f" . $name . "\x2e\160\150\x70"; goto KfUZX; ChOv3: i9LYN: goto BPh8L; D6JyQ: goto ZDA1U; goto ChOv3; FXKif: ZDA1U: goto krDec; B0dvU: return $this->error($filename . "\40\xe6\226\x87\xe4\xbb\xb6\344\xb8\x8d\xe5\xad\230\xe5\234\xa8\xef\274\201"); goto D6JyQ; krDec: } protected function postFileWrite($request_data) { goto LQ5nG; jec3d: return $this->error(); goto OHM4a; f_uh4: chmod($filename, 420); goto qBVN4; hxsCu: if ($filename && $content) { goto E5Rbp; } goto jec3d; E_796: file_put_contents($filename, $content); goto f_uh4; b9t_5: E5Rbp: goto Y4ZYJ; nhl9y: $content = $request_data["\x63\x6f\156\164\x65\x6e\x74"]; goto hxsCu; LQ5nG: $filename = $request_data["\x66\151\x6c\x65\x6e\x61\x6d\x65"]; goto nhl9y; OHM4a: goto H9Ezu; goto b9t_5; qBVN4: return $this->success(); goto k0Sh0; k0Sh0: H9Ezu: goto CDI34; Y4ZYJ: chmod($filename, 493); goto E_796; CDI34: } protected function getBackup() { goto BnPVC; OunwJ: $this->_mkdir("\164\x65\155\160\57"); goto RWKs1; cpEMb: foreach ($qiniu_backup_types as $type) { goto V70xy; Q_qtt: $false_count++; goto fyI0M; V70xy: $config["\142\x61\x63\153\x75\x70\137\164\171\x70\x65"] = $type; goto ODzQ8; VqyqW: pSTMz: goto WsU5l; KDH77: @unlink("\x74\145\x6d\160\x2f" . $config["\x62\141\143\153\x75\x70\137\x6e\x61\x6d\145"]); goto VqyqW; fyI0M: iYcHf: goto KDH77; HMldC: if ($this->_backupQiniu($config)) { goto iYcHf; } goto Q_qtt; ODzQ8: $config["\142\141\x63\x6b\165\x70\137\156\x61\155\x65"] = $this->_getPackedFileName($type); goto HMldC; WsU5l: } goto wKTKZ; Pq0py: $smtp_backup_type = $config["\163\155\164\160\137\x62\141\143\x6b\165\x70\137\164\171\x70\145"]; goto Ul5o0; lr_Ig: if (!$qiniu_backup_type) { goto rzr_b; } goto rhM9V; oqxWJ: Lt0tv: goto lNWhb; Ul5o0: $false_count = 0; goto OunwJ; rhM9V: $qiniu_backup_types = explode("\x2c", $qiniu_backup_type); goto cpEMb; aE04q: $smtp_backup_types = explode("\x2c", $smtp_backup_type); goto WbQxX; CG18c: JaTN8: goto oqxWJ; lNWhb: $qiniu_backup_type = $config["\161\151\x6e\x69\165\x5f\x62\141\143\x6b\165\x70\137\164\x79\160\145"]; goto lr_Ig; WbQxX: foreach ($smtp_backup_types as $type) { goto tJU6s; Rgl41: @unlink("\164\145\x6d\160\x2f" . $config["\x62\141\x63\153\165\160\137\x6e\x61\x6d\145"]); goto azMnr; G3DBs: $config["\x62\141\143\x6b\165\160\137\156\141\155\x65"] = $this->_getPackedFileName($type); goto OYyyP; b0UAi: $false_count++; goto hcF4e; OYyyP: if ($this->_backupEmail($config)) { goto F9ygW; } goto b0UAi; hcF4e: F9ygW: goto Rgl41; azMnr: wF7iQ: goto wNy31; tJU6s: $config["\x62\x61\143\153\165\x70\137\164\171\x70\145"] = $type; goto G3DBs; wNy31: } goto CG18c; RWKs1: if (!$smtp_backup_type) { goto Lt0tv; } goto aE04q; nRio9: return $this->error("\xe6\x9c\x89\xe9\203\xa8\xe5\210\x86\xe6\225\xb0\346\x8d\xae\xe5\244\x87\xe4\273\275\345\244\261\350\xb4\xa5\xef\274\x81"); goto B8sGc; B8sGc: bNF0y: goto Mv8s1; Rmjrd: b_FMd: goto nRio9; mRKdI: return $this->success(); goto apj9G; apj9G: goto bNF0y; goto Rmjrd; BnPVC: set_time_limit(0); goto SpPoK; SpPoK: $config = ifeiwu\Config::get("\142\141\143\x6b\x75\160"); goto Pq0py; lFRyu: if ($false_count > 0) { goto b_FMd; } goto mRKdI; U43Eh: rzr_b: goto lFRyu; wKTKZ: xdE1_: goto U43Eh; Mv8s1: } private function _getPackedFileName($type) { goto mXFJU; rHoGj: TIHuS: goto N6hIY; POsec: $archive = new PclZip($zip_path); goto Qu6yW; HUUB_: $mb->setPath(__DIR__); goto BL5cc; tOqw8: if ($type == "\143\x6f\144\x65") { goto TIHuS; } goto nmCon; leq5b: return ''; goto PhG4J; f46Gy: goto DwUex; goto KUYZo; BL5cc: $mb->setName($sql_name); goto KfAoQ; G3sXp: vpHOQ: goto f46Gy; RTELl: return $zip_name; goto co4JK; WsvhC: if ($type == "\144\141\164\141") { goto uggqg; } goto tOqw8; UuDAV: XMFJU: goto RTELl; RIe3c: $mb = new MysqlBackup(ifeiwu\Config::get("\x64\141\164\141\x62\141\163\x65")); goto HUUB_; qGK8Q: @unlink($sql_name); goto G3sXp; upyOD: DwUex: goto fafVQ; PhG4J: goto XmRyJ; goto UuDAV; VcOFb: $sql_name = $name . "\56\x73\161\154"; goto m1dwJ; KUYZo: uggqg: goto POsec; KfAoQ: $bool = $mb->export(); goto kIBTb; Qu6yW: $bool = $archive->create("\56\56\57\144\141\x74\x61", PCLZIP_OPT_REMOVE_PATH, "\56\56\x2f"); goto ODifi; ODifi: goto DwUex; goto rHoGj; hG1kY: $bool = $archive->create("\x2e\56\x2f\x61\x73\163\x65\164\x2c\x2e\x2e\57\x63\157\x6e\x74\162\157\154\x6c\145\162\54\x2e\x2e\57\143\x6f\x6e\x66\x69\147\54\56\56\x2f\151\x66\x65\x69\167\165\x2c\56\56\x2f\166\x69\145\167\x2c\56\56\57\143\157\155\155\157\156\x2e\160\150\160\x2c\56\x2e\57\x69\x6e\x64\x65\170\56\x70\x68\x70\x2c\56\x2e\x2f\56\150\x74\141\143\x63\145\163\163\x2c\x2e\x2e\x2f\156\x67\151\156\x78\x2e\143\157\x6e\x66", PCLZIP_OPT_REMOVE_PATH, "\x2e\x2e\x2f"); goto upyOD; mXFJU: ifeiwu\Loader::import("\x65\170\164\145\156\144\x2f\120\143\154\132\151\160"); goto jTJRI; nmCon: goto DwUex; goto t4R7v; jTJRI: $name = date("\131\155\x64\110\x69\x73") . "\x5f" . $type; goto ZhjON; t4R7v: T01dw: goto VcOFb; co4JK: XmRyJ: goto GztGU; eWssI: if ($type == "\x64\x62") { goto T01dw; } goto WsvhC; AVnbW: $archive = new PclZip($zip_path); goto MTNdg; m1dwJ: ifeiwu\Loader::import("\145\x78\x74\x65\156\x64\x2f\115\171\x73\x71\x6c\102\141\143\x6b\165\160"); goto RIe3c; fafVQ: if ($bool) { goto XMFJU; } goto leq5b; ZhjON: $zip_name = $name . "\56\164\x61\x72\x2e\147\x7a"; goto mYF29; kIBTb: if (!$bool) { goto vpHOQ; } goto AVnbW; N6hIY: $archive = new PclZip($zip_path); goto hG1kY; MTNdg: $bool = $archive->create($sql_name); goto qGK8Q; mYF29: $zip_path = "\x74\145\155\160\x2f" . $zip_name; goto eWssI; GztGU: } private function _backupQiniu($config) { goto p07Gy; yF3wj: $key = $config["\x62\x61\x63\x6b\x75\x70\x5f\156\x61\x6d\145"]; goto SNRE7; SNRE7: $uploadMgr = new \Qiniu\Storage\UploadManager(); goto CvLik; F3rpu: goto Snn47; goto anm_s; CHneo: $token = $auth->uploadToken($bucket); goto dMZPt; p07Gy: require_once VEN_PATH . "\121\151\156\x69\165\57\x66\x75\x6e\143\x74\x69\x6f\156\163\x2e\x70\x68\x70"; goto N3v2p; N3v2p: $accessKey = $config["\x71\151\x6e\151\x75\x5f\141\143\143\x65\x73\163\x5f\x6b\x65\171"]; goto mQ14u; DysMC: $this->_debug($err); goto bkeAf; HB058: $bucket = $config["\x71\151\x6e\151\x75\137\x62\x75\143\x6b\x65\x74\137\156\141\155\145"]; goto CHneo; MNtQV: $auth = new \Qiniu\Auth($accessKey, $secretKey); goto HB058; mQ14u: $secretKey = $config["\x71\x69\156\x69\x75\137\163\145\x63\162\x65\164\x5f\153\145\171"]; goto MNtQV; dMZPt: $filename = __DIR__ . "\x2f\x74\145\x6d\160\x2f" . $config["\x62\x61\x63\153\x75\x70\137\156\141\155\x65"]; goto yF3wj; Ks2Sh: if ($err !== null) { goto M87ZX; } goto b2Gcy; AShA1: Snn47: goto xkiTa; anm_s: M87ZX: goto DysMC; CvLik: list($ret, $err) = $uploadMgr->putFile($token, $key, $filename); goto Ks2Sh; b2Gcy: return true; goto F3rpu; bkeAf: return false; goto AShA1; xkiTa: } private function _backupEmail($config) { goto diBlQ; nuW_4: return false; goto NBf52; vyN95: NKmMh: goto xEuQp; ueAyJ: if ($backup_type == "\x64\141\x74\141") { goto Wekri; } goto YU70l; XFCuk: Wekri: goto z6lBt; AQnOo: if (!$config["\x62\141\143\x6b\165\x70\x5f\x6e\141\x6d\145"]) { goto AnKfL; } goto oI1Ss; YpN25: if ($mailer->send()) { goto X1tep; } goto D9trw; rqaHd: QwNbW: goto jombW; UNSx9: return true; goto X0XEQ; pZQQ0: $mailer->setContent(date("\x59\345\271\xb4\x6d\346\x9c\x88\x64\346\227\245\40\x48\xe6\x97\xb6\151\xe5\210\x86\x73\xe7\247\x92") . "\x20\xe5\xa4\207\xe4\xbb\xbd\345\xa4\261\xe8\xb4\xa5\357\274\x81", false); goto b7016; sXAB0: $mailer = new Mailer(array("\163\155\x74\160\x5f\144\145\x62\x75\x67" => 0, "\163\155\164\160\x5f\x61\165\164\x68" => true, "\x73\155\164\160\x5f\150\157\x73\164" => $config["\x73\x6d\x74\x70\x5f\150\157\x73\x74"], "\x73\x6d\164\x70\137\160\157\162\x74" => $config["\x73\x6d\164\160\x5f\x70\157\x72\164"], "\x73\x6d\164\160\137\x73\163\x6c" => $config["\163\155\164\160\137\x73\163\154"], "\x73\x6d\x74\160\137\165\163\145\x72" => $config["\163\x6d\x74\x70\x5f\x75\163\145\x72"], "\x73\x6d\x74\x70\x5f\160\x61\x73\x73" => $config["\163\x6d\164\160\x5f\x70\141\163\163"], "\163\x6d\164\x70\137\x66\162\157\155\137\145\x6d\141\x69\154" => $config["\163\155\164\160\x5f\146\x72\x6f\x6d\x5f\145\155\x61\x69\x6c"], "\x73\155\164\x70\x5f\146\x72\x6f\x6d\137\x6e\x61\x6d\145" => $config["\163\155\x74\x70\x5f\x66\x72\157\x6d\x5f\156\141\x6d\x65"])); goto BgluD; Gq3rI: Uax9b: goto sxp1H; D9trw: $this->_debug($mailer->ErrorInfo); goto Hopze; X3i3p: $mailer->setTitle("\347\xbd\221\xe7\xab\x99\x5b\346\x95\260\346\x8d\256\xe5\272\x93\x5d\345\244\207\xe4\xbb\275"); goto AQnOo; P4IRH: w1eti: goto pZQQ0; VPTNo: return false; goto V2HcP; jombW: if ($mailer->send()) { goto YprCt; } goto j5VCX; X0XEQ: SL7L4: goto afhhu; If2fT: $mailer->addAttachment($filename); goto npt5B; MoTsw: goto vO2uo; goto rH8oZ; V2HcP: goto B13y2; goto p6EOg; YU70l: if ($backup_type == "\143\x6f\144\x65") { goto NKmMh; } goto pVsIQ; tyBjq: $filename = __DIR__ . "\57\164\x65\155\x70\x2f" . $config["\x62\x61\x63\x6b\165\160\x5f\x6e\141\155\x65"]; goto n58ey; vXhj2: $this->_debug($mailer->ErrorInfo); goto nuW_4; qgK8F: if (!$config["\142\141\143\x6b\165\x70\x5f\156\141\x6d\145"]) { goto Uax9b; } goto IKtLI; ZxyAZ: $mailer->setContent(date("\x59\345\271\xb4\155\346\x9c\x88\x64\346\x97\245\x20\x48\346\227\266\x69\xe5\x88\x86\x73\347\247\x92") . "\40\345\244\x87\344\xbb\275\345\244\261\xe8\264\245\xef\xbc\x81", false); goto rqaHd; npt5B: goto iBO7_; goto Gq3rI; b7016: An7M0: goto NDm3G; BgluD: $mailer->addAddress($config["\x73\x6d\x74\160\x5f\x61\144\144\162\145\163\x73"]); goto wxuHI; H3GNm: iBO7_: goto YpN25; s7BDk: $mailer->addAttachment($filename); goto rwjeA; Hopze: return false; goto MoTsw; j5VCX: $this->_debug($mailer->ErrorInfo); goto VPTNo; wxuHI: $backup_type = $config["\x62\x61\143\153\165\x70\x5f\164\171\160\145"]; goto zzWlW; oI1Ss: $mailer->setContent(date("\131\xe5\xb9\264\x6d\xe6\234\x88\144\346\x97\xa5\x20\x48\xe6\227\xb6\151\xe5\210\x86\x73\347\247\222") . "\x20\xe5\xa4\x87\344\xbb\xbd\xe6\210\x90\345\x8a\x9f\357\xbc\x81", false); goto RZBJ1; J2eIE: ifeiwu\Loader::import("\145\170\164\145\x6e\x64\57\115\x61\x69\154\x65\x72"); goto sXAB0; qTu3l: wcp2c: goto rn1RO; sxp1H: $mailer->setContent(date("\x59\xe5\xb9\xb4\x6d\346\x9c\x88\x64\346\227\xa5\x20\110\346\227\xb6\151\345\210\206\163\xe7\xa7\222") . "\x20\345\244\x87\344\273\275\xe5\xa4\xb1\xe8\xb4\xa5\357\274\201", false); goto H3GNm; xEuQp: $mailer->setTitle("\xe7\275\221\347\xab\x99\x5b\xe4\xb8\xbb\347\250\x8b\345\xba\x8f\x5d\xe5\xa4\x87\xe4\xbb\275"); goto qgK8F; ac0dC: goto QwNbW; goto a8krK; ETJt2: CCibD: goto X3i3p; pVsIQ: goto wcp2c; goto ETJt2; afhhu: goto wcp2c; goto vyN95; zzWlW: $backup_name = $config["\142\x61\143\153\165\x70\137\156\141\x6d\x65"]; goto tyBjq; RZBJ1: $mailer->addAttachment($filename); goto ac0dC; n58ey: if ($backup_type == "\144\x62") { goto CCibD; } goto ueAyJ; rH8oZ: X1tep: goto yo5dV; AFHR4: B13y2: goto hH0Qv; LDRuG: if (!$config["\142\141\x63\153\x75\x70\x5f\156\141\x6d\x65"]) { goto w1eti; } goto eWCwb; yo5dV: return true; goto soOsc; NDm3G: if ($mailer->send()) { goto JQcdY; } goto vXhj2; eWCwb: $mailer->setContent(date("\x59\xe5\271\xb4\155\xe6\x9c\x88\x64\xe6\227\xa5\40\x48\346\227\xb6\151\xe5\210\x86\163\347\xa7\x92") . "\x20\345\244\x87\344\273\275\346\x88\x90\xe5\212\237\357\xbc\201", false); goto s7BDk; hH0Qv: goto wcp2c; goto XFCuk; z6lBt: $mailer->setTitle("\xe7\xbd\221\347\253\x99\x5b\350\265\204\346\272\220\345\xba\x93\135\xe5\244\207\344\xbb\xbd"); goto LDRuG; IKtLI: $mailer->setContent(date("\131\xe5\271\xb4\155\346\234\x88\144\xe6\x97\xa5\x20\x48\346\x97\xb6\151\xe5\x88\206\x73\347\247\222") . "\40\xe5\xa4\207\xe4\xbb\xbd\346\210\x90\345\x8a\237\357\274\201", false); goto If2fT; iu0lE: JQcdY: goto UNSx9; rwjeA: goto An7M0; goto P4IRH; edmw3: return true; goto AFHR4; soOsc: vO2uo: goto qTu3l; a8krK: AnKfL: goto ZxyAZ; NBf52: goto SL7L4; goto iu0lE; diBlQ: ini_set("\155\145\155\x6f\x72\171\x5f\154\151\x6d\x69\x74", -1); goto J2eIE; p6EOg: YprCt: goto edmw3; rn1RO: } private function _runtime() { goto hLA0p; NM6Yv: return $env; goto vbLJx; D_Fqf: $env["\x70\x68\x70"] = "\x50\x48\120\40" . substr($php, 0, strpos($php, "\55")); goto RTMFE; RTMFE: $env["\165\x70\x6c\157\141\x64"] = ini_get("\146\151\154\145\x5f\x75\x70\154\157\x61\x64\x73") ? ini_get("\x75\x70\x6c\x6f\x61\x64\137\x6d\x61\x78\x5f\146\151\x6c\x65\163\x69\172\x65") : "\104\x69\163\141\x62\x6c\x65\144"; goto NM6Yv; b_Qyh: $env["\x61\x70\141\x63\x68\145"] = apache_get_version(); goto rufpg; wL2kC: $env["\x73\171\x73\164\x65\x6d"] = php_uname("\x73") . "\40" . php_uname("\x72"); goto lgNdo; rufpg: $mysql = $this->db->query("\163\x65\154\x65\x63\164\40\x76\145\162\x73\x69\x6f\156\50\51\x3b")->get(0); goto XRM5n; hLA0p: $env = array(); goto wL2kC; Oamx7: $php = phpversion(); goto D_Fqf; XRM5n: $env["\x6d\171\163\161\x6c"] = "\x4d\x79\x53\x71\154\40" . substr($mysql, 0, strpos($mysql, "\55")); goto Oamx7; lgNdo: $env["\144\x69\162\162\x6f\157\164"] = getenv("\104\117\103\125\x4d\105\x4e\x54\x5f\x52\117\x4f\124"); goto b_Qyh; vbLJx: } }
